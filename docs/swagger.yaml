basePath: /api/v1
definitions:
  models.Card:
    properties:
      rank:
        description: 2-10, J, Q, K, A
        type: string
      suit:
        description: hearts, diamonds, clubs, spades
        type: string
      value:
        description: 2-14 (A=14)
        type: integer
    type: object
  models.Game:
    properties:
      big_blind:
        type: integer
      community_cards:
        items:
          $ref: '#/definitions/models.Card'
        type: array
      created_at:
        type: string
      current_bet:
        type: integer
      current_player:
        type: integer
      dealer_position:
        type: integer
      deck:
        items:
          $ref: '#/definitions/models.Card'
        type: array
      id:
        type: string
      players:
        items:
          $ref: '#/definitions/models.GamePlayer'
        type: array
      pot:
        type: integer
      small_blind:
        type: integer
      state:
        $ref: '#/definitions/models.GameState'
      table:
        allOf:
        - $ref: '#/definitions/models.Table'
        description: Связи
      table_id:
        type: integer
      updated_at:
        type: string
    type: object
  models.GamePlayer:
    properties:
      bet:
        type: integer
      cards:
        items:
          $ref: '#/definitions/models.Card'
        type: array
      chips:
        type: integer
      game:
        allOf:
        - $ref: '#/definitions/models.Game'
        description: Связи
      game_id:
        type: string
      id:
        type: integer
      is_all_in:
        type: boolean
      is_folded:
        type: boolean
      last_action:
        $ref: '#/definitions/models.PlayerAction'
      position:
        type: integer
      user:
        $ref: '#/definitions/models.User'
      user_uuid:
        type: string
    type: object
  models.GameState:
    enum:
    - waiting
    - preflop
    - flop
    - turn
    - river
    - showdown
    - finished
    type: string
    x-enum-varnames:
    - GameStateWaiting
    - GameStatePreFlop
    - GameStateFlop
    - GameStateTurn
    - GameStateRiver
    - GameStateShowdown
    - GameStateFinished
  models.PlayerAction:
    enum:
    - fold
    - call
    - raise
    - check
    - bet
    type: string
    x-enum-varnames:
    - ActionFold
    - ActionCall
    - ActionRaise
    - ActionCheck
    - ActionBet
  models.Table:
    properties:
      blinds:
        type: string
      buy_in:
        type: integer
      category:
        type: string
      created_at:
        type: string
      id:
        type: integer
      max_seats:
        type: integer
      players:
        type: integer
      updated_at:
        type: string
    type: object
  models.TableResponse:
    properties:
      tables:
        items:
          $ref: '#/definitions/models.Table'
        type: array
    type: object
  models.User:
    properties:
      balance:
        type: integer
      created_at:
        type: string
      telegram_id:
        type: integer
      updated_at:
        type: string
      username:
        type: string
      uuid:
        type: string
    type: object
host: 208.123.185.204:3000
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: |-
    Полнофункциональный REST API для игры в покер с категориями столов LOW, MID, VIP
    Использует PostgreSQL, Kafka, Redis и авторизацию через Telegram Web App
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: Poker REST API
  version: "1.0"
paths:
  /games/{gameId}:
    get:
      consumes:
      - application/json
      description: Возвращает текущее состояние игры по ID
      parameters:
      - description: ID игры
        in: path
        name: gameId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Game'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - TelegramAuth: []
      summary: Получить состояние игры
      tags:
      - game
  /games/{gameId}/action:
    post:
      consumes:
      - application/json
      description: Обрабатывает игровое действие игрока (fold, call, raise, check,
        bet)
      parameters:
      - description: ID игры
        in: path
        name: gameId
        required: true
        type: string
      - description: Действие игрока
        in: body
        name: action
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - TelegramAuth: []
      summary: Сделать ход в игре
      tags:
      - game
  /healthcheck:
    get:
      consumes:
      - application/json
      description: Возвращает статус работы сервера
      produces:
      - text/plain
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Проверка состояния сервера
      tags:
      - system
  /join-available-table:
    post:
      consumes:
      - application/json
      description: Автоматически находит доступный стол указанной категории или создает
        новый
      parameters:
      - description: Категория стола
        in: body
        name: request
        required: true
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - TelegramAuth: []
      summary: Присоединиться к доступному столу
      tags:
      - tables
  /profile:
    get:
      consumes:
      - application/json
      description: Возвращает профиль авторизованного пользователя
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              $ref: '#/definitions/models.User'
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - TelegramAuth: []
      summary: Получить профиль пользователя
      tags:
      - users
    put:
      consumes:
      - application/json
      description: Обновляет данные профиля авторизованного пользователя
      parameters:
      - description: Данные для обновления
        in: body
        name: profile
        required: true
        schema:
          additionalProperties:
            type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - TelegramAuth: []
      summary: Обновить профиль пользователя
      tags:
      - users
  /public/tables:
    get:
      consumes:
      - application/json
      description: Возвращает список столов по указанной категории
      parameters:
      - default: ALL
        description: Категория столов
        enum:
        - ALL
        - LOW
        - MID
        - VIP
        in: query
        name: category
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TableResponse'
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Получить список столов
      tags:
      - tables
  /public/tables/{id}:
    get:
      consumes:
      - application/json
      description: Возвращает информацию о конкретном столе
      parameters:
      - description: ID стола
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Table'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Получить стол по ID
      tags:
      - tables
  /tables:
    get:
      consumes:
      - application/json
      description: Возвращает список столов по указанной категории
      parameters:
      - default: ALL
        description: Категория столов
        enum:
        - ALL
        - LOW
        - MID
        - VIP
        in: query
        name: category
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TableResponse'
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Получить список столов
      tags:
      - tables
  /tables/{id}:
    get:
      consumes:
      - application/json
      description: Возвращает информацию о конкретном столе
      parameters:
      - description: ID стола
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Table'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Получить стол по ID
      tags:
      - tables
  /tables/{id}/join:
    post:
      consumes:
      - application/json
      description: Позволяет авторизованному игроку присоединиться к указанному столу
      parameters:
      - description: ID стола
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - TelegramAuth: []
      summary: Присоединиться к столу
      tags:
      - tables
  /tables/{id}/start-game:
    post:
      consumes:
      - application/json
      description: Начинает новую игру в покер за указанным столом
      parameters:
      - description: ID стола
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - TelegramAuth: []
      summary: Начать игру за столом
      tags:
      - game
securityDefinitions:
  TelegramAuth:
    description: Telegram Web App init_data для авторизации
    in: header
    name: x-init-data
    type: apiKey
swagger: "2.0"
